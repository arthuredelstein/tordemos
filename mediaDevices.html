<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <title>MediaDevices fingerprinting</title>
 </head>
 <body>
   <script>
    const sleep = (timeMs, returnValue) =>
      new Promise(resolve => setTimeout(() => resolve(returnValue), timeMs));

    const tryMaxWidth = testWidth => navigator.mediaDevices.getUserMedia(
        { video : { width : { max : testWidth }, height : { max : 1 }}});

    async function runTest() {
      for (let testWidth = 100; testWidth < 5000; ++testWidth) {
        try {
          await tryMaxWidth(testWidth);
        } catch (e) {
          if (e.name === "NotAllowedError")
          console.log(e.name);
        }
      }
    }
    runTest();
   </script>
 </body>
</html>

